# üß™ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ ‚Äì Lifetimes –≤ Rust

## üéØ –¶–µ–ª–∏
- –î–∞ —Ä–∞–∑–±–µ—Ä–µ–º –∑–∞—â–æ Rust –∏–º–∞ lifetimes.
- –î–∞ —É–ø—Ä–∞–∂–Ω–∏–º –±–∞–∑–æ–≤–∏ –ø—Ä–∏–º–µ—Ä–∏ —Å —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∏, —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏.
- –î–∞ —Ä–∞–∑–ª–∏—á–∞–≤–∞–º–µ `'static`, –∏–º–ø–ª–∏—Ü–∏—Ç–Ω–∏—Ç–µ –∏ —è–≤–Ω–∏—Ç–µ lifetimes.

---

## ‚ùì –í—ä–ø—Ä–æ—Å–∏ –∑–∞ —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞

### 1) **–ö–∞–∫–≤–æ –æ–ø–∏—Å–≤–∞ lifetime-–∞ –≤ Rust?**
- –∞) –ü—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ –≤ —Å—Ç–µ–∫–∞  
- –±) –ö–æ–ª–∫–æ –≤—Ä–µ–º–µ –µ –≤–∞–ª–∏–¥–Ω–∞ –¥–∞–¥–µ–Ω–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è  
- –≤) –°–∫–æ—Ä–æ—Å—Ç—Ç–∞ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ  

<details>
<summary>–ü–æ–∫–∞–∂–∏ –æ—Ç–≥–æ–≤–æ—Ä</summary>

‚úîÔ∏è **–ü—Ä–∞–≤–∏–ª–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä:** –±)

Lifetime –æ–∑–Ω–∞—á–∞–≤–∞ *–ø–µ—Ä–∏–æ–¥–∞, –≤ –∫–æ–π—Ç–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –µ –≤–∞–ª–∏–¥–Ω–∞*. –ù–µ —Å–µ –æ—Ç–Ω–∞—Å—è –¥–æ —Ä–µ–∞–ª–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–∞–º–µ—Ç, –∞ –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç –ø—Ä–∏ –∫–æ–º–ø–∏–ª–∞—Ü–∏—è.
</details>

---

### 2) –ó–∞—â–æ —Ç–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è **–Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä–∞**?

```rust
fn choose<'a>(a: &'a str, b: &str) -> &'a str {
    a
}
```

<details> <summary>–ü–æ–∫–∞–∂–∏ –æ—Ç–≥–æ–≤–æ—Ä</summary>

–í—ä–≤ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ b: &str –Ω—è–º–∞ lifetime 'a, –∑–∞—Ç–æ–≤–∞ –∫–æ–º–ø–∏–ª–∞—Ç–æ—Ä—ä—Ç –Ω–µ –∑–Ω–∞–µ –¥–∞–ª–∏ b –Ω–µ –∂–∏–≤–µ–µ –ø–æ-–∫—Ä–∞—Ç–∫–æ –æ—Ç 'a.
–¢–æ–µ—Å—Ç: –Ω–µ –º–æ–∂–µ–º –¥–∞ –æ–±–µ—â–∞–µ–º, —á–µ —Ä–µ–∑—É–ª—Ç–∞—Ç—ä—Ç 'a –µ –≤–∞–ª–∏–¥–µ–Ω, –∞–∫–æ –Ω–µ —É—Ç–æ—á–Ω–∏–º lifetimes –∏ –∑–∞ b.

</details>

---

### 3) –ü–æ–ø—Ä–∞–≤–∏ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ —Ç–∞–∫–∞, —á–µ –¥–∞ —Å–µ –∫–æ–º–ø–∏–ª–∏—Ä–∞:

```rust
fn longest(x: &str, y: &str) -> &str {
    if x.len() > y.len() { x } else { y }
}
```

<details> <summary>–ü–æ–∫–∞–∂–∏ –æ—Ç–≥–æ–≤–æ—Ä</summary>

```rust
fn longest<'a>(x: &'a str, y: &'a str) -> &'a str {
    if x.len() > y.len() { x } else { y }
}
```
üîë –ò –¥–≤–∞—Ç–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏ —Ä–µ–∑—É–ª—Ç–∞—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞—Ç –µ–¥–∏–Ω –∏ —Å—ä—â–∏ lifetime.

</details>

---

### 4) –ö–∞–∫–≤–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ 'static lifetime?

<details> <summary>–ü–æ–∫–∞–∂–∏ –æ—Ç–≥–æ–≤–æ—Ä</summary>

'static –æ–∑–Ω–∞—á–∞–≤–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞ –∑–∞ —Ü—è–ª–æ—Ç–æ –≤—Ä–µ–º–µ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞—Ç–∞. –û–±–∏–∫–Ω–æ–≤–µ–Ω–æ –µ –∑–∞ –≥–ª–æ–±–∞–ª–Ω–∏ –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–∏ —Å—Ç—Ä–∏–Ω–≥–æ–≤–µ:

```rust
let s: &'static str = "Hello";
```

</details>

---

### 5) –ö–∞–∫ –¥–∞ –¥–æ–±–∞–≤–∏–º lifetime –∫—ä–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ—è—Ç–æ —Å—ä–¥—ä—Ä–∂–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è?

–î–∞ —Å–µ –ø–æ–ø—Ä–∞–≤–∏:

```rust
struct Holder {
    data: &str
}
```

<details> <summary>–ü–æ–∫–∞–∂–∏ –æ—Ç–≥–æ–≤–æ—Ä</summary>

```rust
struct Holder<'a> {
    data: &'a str,
}
```

üìå –ö–æ–≥–∞—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—ä–¥—ä—Ä–∂–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∏, —Ç—è –ø—Ä–∏–¥–æ–±–∏–≤–∞ lifetime –ø–∞—Ä–∞–º–µ—Ç—ä—Ä.

</details>

---

### 6) –ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ lifetime elision (–µ–ª–∏–∑–∏—è –Ω–∞ lifetime-–∏)?

<details> <summary>–ü–æ–∫–∞–∂–∏ –æ—Ç–≥–æ–≤–æ—Ä</summary>

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–±–∞–≤—è lifetimes –ø–æ –ø—Ä–∞–≤–∏–ª–∞. –ù–∞–ø—Ä–∏–º–µ—Ä:

```rust
fn len(s: &str) -> usize
```

–ö–æ–º–ø–∏–ª–∞—Ç–æ—Ä—ä—Ç –≤—Å—ä—â–Ω–æ—Å—Ç –≥–æ —á–µ—Ç–µ –∫–∞—Ç–æ:

```rust
fn len<'a>(s: &'a str) -> usize
```

üìå –ù–µ –º–∞—Ö–∞ lifetimes, –∞ –≥–∏ –¥–æ–±–∞–≤—è implicit –≤–º–µ—Å—Ç–æ –Ω–∞—Å.

</details>

---

### 7) –ó–∞—â–æ —Ç–æ–∑–∏ –∫–æ–¥ –µ –±–µ–∑–æ–ø–∞—Å–µ–Ω –∏ –≤–∞–ª–∏–¥–µ–Ω?

```rust
let x = String::from("abc");
let r = x.as_str();
println!("{}", r);
```

<details> <summary>–ü–æ–∫–∞–∂–∏ –æ—Ç–≥–æ–≤–æ—Ä</summary>

–ó–∞—â–æ—Ç–æ r –Ω–µ –∂–∏–≤–µ–µ –ø–æ-–¥—ä–ª–≥–æ –æ—Ç x. Lifetime –Ω–∞ r –µ –≤–ª–æ–∂–µ–Ω –≤ lifetime –Ω–∞ x. –ê–∫–æ x –∏–∑–ª–µ–∑–µ –æ—Ç scope-–∞ –ø—Ä–µ–¥–∏ r, –∫–æ–º–ø–∏–ª–∞—Ç–æ—Ä—ä—Ç –±–∏ –¥–∞–ª –≥—Ä–µ—à–∫–∞.

</details>

---

### 8) –ú–æ–∂–µ –ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –¥–∞ –≤—ä—Ä–Ω–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –∫—ä–º –ª–æ–∫–∞–ª–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞?

–ü—Ä–∏–º–µ—Ä:

```rust
fn bad() -> &String {
    let s = String::from("hi");
    &s
}
```

<details> <summary>–ü–æ–∫–∞–∂–∏ –æ—Ç–≥–æ–≤–æ—Ä</summary>

‚ùå –ù–µ. –õ–æ–∫–∞–ª–Ω–∞—Ç–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ s —Å–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–≤–∞ –ø—Ä–∏ –∏–∑–ª–∏–∑–∞–Ω–µ –æ—Ç —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞.
–§—É–Ω–∫—Ü–∏—è—Ç–∞ –±–∏ –≤—ä—Ä–Ω–∞–ª–∞ –≤–∏—Å—è—â–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è (dangling reference), –∫–æ–µ—Ç–æ Rust –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞ –ø—Ä–∏ –∫–æ–º–ø–∏–ª–∞—Ü–∏—è.

</details>
